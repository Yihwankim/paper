----------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\Kimyihwan\OneDrive - kaist.ac.kr\paper_prepare\seminar data\
> Regression_data.log
  log type:  text
 opened on:  28 Apr 2021, 22:53:03

. 
. ********************************
. ********** 2017. 2Q ************
. ********************************
. clear

. 
. import excel data/Seoul_20172Q.xlsx, firstrow clear

. 
. 
. * 개별난방인 경우 더미변수 D1에 1의 값을 부여
. gen D1 = 0

. replace D1 =1 if 난방 == "개별난방"
(11,888 real changes made)

. 
. * 지역난방인 경우 더미변수 D2에 1의 값을 부여
. gen D2 = 0

. replace D2=1 if 난방 == "지역난방"
(5,345 real changes made)

. 
. * 중앙난방인 경우 더미변수 D3에 1의 값을 부여
. gen D3 = 0

. replace D3=1 if 난방 == "중앙난방"
(1,416 real changes made)

. 
. * 계단식일 경우 더미변수 D4에 1의 값을 부여
. gen D4 = 0

. replace D4=1 if 구조 == "계단식"
(13,642 real changes made)

. 
. * 복도식일 경우 더미변수 D5에 1의 값을 부여
. gen D5 = 0

. replace D5=1 if 구조 == "복도식"
(4,546 real changes made)

. 
. * 복합식일 경우 더미변수 D6에 1의 값을 부여
. gen D6 = 0

. replace D6=1 if 구조 == "복합식"
(461 real changes made)

. 
. * 연수를 조정해주기 
. gen age = 연수 - 48

. 
. * 통계량 확인하기
. global variable 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용면적 전용률 
> ///
> 방개수 화장실개수 층 D1 D2 D3 D4 D5 D6 

. 
. su $variable

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    거래금액 |     18,649    60075.12    34397.22      11800     450000
         age |     18,649     190.575    94.51713         -6        553
      세대수 |     18,649    1093.681    1145.053         18       6864
주차대수_~대 |     18,649    1.157829    .4600806        .12       5.11
      용적률 |     18,649    281.7558    115.9703         12       1249
-------------+---------------------------------------------------------
      건폐율 |     18,649    22.83318    9.496387          2         93
    전용면적 |     18,649    82.04675    26.82336      24.01     256.17
      전용률 |     18,649    77.02477    4.766809         54        100
      방개수 |     18,649    3.033621    .6280618          1          6
  화장실개수 |     18,649    1.683522    .4793095          1          4
-------------+---------------------------------------------------------
          층 |     18,649    9.778004    6.346144          1         54
          D1 |     18,649    .6374605    .4807463          0          1
          D2 |     18,649    .2866105    .4521901          0          1
          D3 |     18,649     .075929    .2648916          0          1
          D4 |     18,649    .7315138    .4431838          0          1
-------------+---------------------------------------------------------
          D5 |     18,649    .2437664    .4293649          0          1
          D6 |     18,649    .0247198    .1552741          0          1

. 
. * 현재 사용가능한 모든 변수를 활용하여 회귀분석
. reg 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용면적 전용률 방개수 화장
> 실개수 층 D1 D2 D3 ///
> D4 D5 D6 
note: D2 omitted because of collinearity
note: D5 omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =    18,649
-------------+----------------------------------   F(14, 18634)    =   1618.61
       Model |  1.2108e+13        14  8.6483e+11   Prob > F        =    0.0000
    Residual |  9.9562e+12    18,634   534300731   R-squared       =    0.5488
-------------+----------------------------------   Adj R-squared   =    0.5484
       Total |  2.2064e+13    18,648  1.1832e+09   Root MSE        =     23115

-------------------------------------------------------------------------------
     거래금액 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -31.10472   2.742077   -11.34   0.000    -36.47944      -25.73
       세대수 |   1.241716   .1719416     7.22   0.000     .9046952    1.578738
주차대수_세대 |   17116.46   538.5119    31.78   0.000     16060.93    18171.99
       용적률 |  -3.563542   2.273219    -1.57   0.117    -8.019259    .8921741
       건폐율 |  -423.1169   27.43898   -15.42   0.000    -476.8998    -369.334
     전용면적 |   741.1881   14.27741    51.91   0.000     713.2031    769.1731
       전용률 |   -271.207   52.71121    -5.15   0.000    -374.5258   -167.8882
       방개수 |  -3184.226   474.7257    -6.71   0.000    -4114.732    -2253.72
   화장실개수 |  -2517.781   632.8174    -3.98   0.000    -3758.161   -1277.401
           층 |   254.9231   28.99334     8.79   0.000     198.0935    311.7527
           D1 |  -22243.58   427.2852   -52.06   0.000     -23081.1   -21406.07
           D2 |          0  (omitted)
           D3 |  -12739.69   709.7912   -17.95   0.000    -14130.95   -11348.44
           D4 |   2472.766   615.2954     4.02   0.000     1266.731    3678.801
           D5 |          0  (omitted)
           D6 |   667.1154   1205.771     0.55   0.580    -1696.306    3030.537
        _cons |   40296.87   3747.665    10.75   0.000      32951.1    47642.64
-------------------------------------------------------------------------------

. 
. * 전용면적 제외, 더미변수 D1와 D4 제외
. reg 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용률 방개수 화장실개수 층 
> D2 D3 ///
> D5 D6 

      Source |       SS           df       MS      Number of obs   =    18,649
-------------+----------------------------------   F(13, 18635)    =   1341.83
       Model |  1.0668e+13        13  8.2059e+11   Prob > F        =    0.0000
    Residual |  1.1396e+13    18,635   611542670   R-squared       =    0.4835
-------------+----------------------------------   Adj R-squared   =    0.4831
       Total |  2.2064e+13    18,648  1.1832e+09   Root MSE        =     24729

-------------------------------------------------------------------------------
     거래금액 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -9.141917   2.898468    -3.15   0.002    -14.82318   -3.460655
       세대수 |   1.364082   .1839334     7.42   0.000     1.003556    1.724608
주차대수_세대 |   27467.48   535.1772    51.32   0.000     26418.48    28516.48
       용적률 |   10.21071   2.415367     4.23   0.000     5.476376    14.94505
       건폐율 |  -454.3493   29.34838   -15.48   0.000    -511.8747   -396.8238
       전용률 |   762.2934   52.21602    14.60   0.000     659.9453    864.6416
       방개수 |   13126.43   380.7339    34.48   0.000     12380.16     13872.7
   화장실개수 |   8001.788   641.3678    12.48   0.000     6744.648    9258.927
           층 |   291.3145   31.00928     9.39   0.000     230.5335    352.0956
           D2 |   24805.75   454.0688    54.63   0.000     23915.74    25695.77
           D3 |    11477.4   744.0735    15.43   0.000     10018.95    12935.85
           D5 |   1136.899   654.0535     1.74   0.082    -145.1056    2418.903
           D6 |  -217.0473   1204.152    -0.18   0.857    -2577.296    2143.201
        _cons |  -87088.44   3657.706   -23.81   0.000    -94257.88      -79919
-------------------------------------------------------------------------------

. 
. reg 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용률 방개수 화장실개수 층 
> D2 D3 ///
> D5 D6  ,r

Linear regression                               Number of obs     =     18,649
                                                F(13, 18635)      =     583.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.4835
                                                Root MSE          =      24729

-------------------------------------------------------------------------------
              |               Robust
     거래금액 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -9.141917   4.078586    -2.24   0.025    -17.13632   -1.147516
       세대수 |   1.364082   .1986182     6.87   0.000     .9747723    1.753392
주차대수_세대 |   27467.48   940.7093    29.20   0.000      25623.6    29311.36
       용적률 |   10.21071   3.192141     3.20   0.001     3.953827     16.4676
       건폐율 |  -454.3493   32.46992   -13.99   0.000    -517.9933   -390.7052
       전용률 |   762.2934   56.79156    13.42   0.000     650.9768    873.6101
       방개수 |   13126.43   522.5413    25.12   0.000      12102.2    14150.66
   화장실개수 |   8001.788   876.0767     9.13   0.000     6284.597    9718.978
           층 |   291.3145   36.33958     8.02   0.000     220.0857    362.5434
           D2 |   24805.75   547.2831    45.33   0.000     23733.03    25878.48
           D3 |    11477.4   740.1314    15.51   0.000     10026.67    12928.12
           D5 |   1136.899   724.8323     1.57   0.117    -283.8385    2557.636
           D6 |  -217.0473   1370.318    -0.16   0.874    -2902.995      2468.9
        _cons |  -87088.44   4507.217   -19.32   0.000       -95923   -78253.88
-------------------------------------------------------------------------------

. 
. * 종속변수에 log를 취하여 분석
. gen ln_price = ln(거래금액)

. 
. reg ln_price age 세대수 주차대수_세대 용적률 건폐율 전용률 방개수 화장실개수 층 
> D2 D3 ///
> D5 D6 

      Source |       SS           df       MS      Number of obs   =    18,649
-------------+----------------------------------   F(13, 18635)    =   1773.20
       Model |  2285.29132        13   175.79164   Prob > F        =    0.0000
    Residual |  1847.44285    18,635  .099138334   R-squared       =    0.5530
-------------+----------------------------------   Adj R-squared   =    0.5527
       Total |  4132.73417    18,648  .221618092   Root MSE        =    .31486

-------------------------------------------------------------------------------
     ln_price |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |   -.000361   .0000369    -9.78   0.000    -.0004333   -.0002887
       세대수 |   .0000216   2.34e-06     9.23   0.000      .000017    .0000262
주차대수_세대 |   .3603994    .006814    52.89   0.000     .3470432    .3737555
       용적률 |   .0000967   .0000308     3.15   0.002     .0000365     .000157
       건폐율 |  -.0061528   .0003737   -16.47   0.000    -.0068852   -.0054203
       전용률 |   .0093139   .0006648    14.01   0.000     .0080107     .010617
       방개수 |   .1894582   .0048476    39.08   0.000     .1799564    .1989599
   화장실개수 |   .1253302   .0081661    15.35   0.000     .1093239    .1413365
           층 |   .0037074   .0003948     9.39   0.000     .0029335    .0044813
           D2 |   .2823227   .0057813    48.83   0.000     .2709907    .2936547
           D3 |   .1715101   .0094738    18.10   0.000     .1529406    .1900796
           D5 |  -.0829787   .0083276    -9.96   0.000    -.0993016   -.0666558
           D6 |  -.0455718   .0153316    -2.97   0.003    -.0756232   -.0155204
        _cons |   9.012642   .0465711   193.52   0.000     8.921358    9.103925
-------------------------------------------------------------------------------

. 
. export excel using 2017_2Q_data.xlsx, replace
file 2017_2Q_data.xlsx saved

. 
. ********************************
. ********** 2020. 4Q ************
. ********************************
. clear

. 
. import excel data/Seoul_20204Q.xlsx, firstrow clear

. 
. 
. * 개별난방인 경우 더미변수 D1에 1의 값을 부여
. gen D1 = 0

. replace D1 =1 if 난방 == "개별난방"
(6,322 real changes made)

. 
. * 지역난방인 경우 더미변수 D2에 1의 값을 부여
. gen D2 = 0

. replace D2=1 if 난방 == "지역난방"
(2,876 real changes made)

. 
. * 중앙난방인 경우 더미변수 D3에 1의 값을 부여
. gen D3 = 0

. replace D3=1 if 난방 == "중앙난방"
(702 real changes made)

. 
. * 계단식일 경우 더미변수 D4에 1의 값을 부여
. gen D4 = 0

. replace D4=1 if 구조 == "계단식"
(6,944 real changes made)

. 
. * 복도식일 경우 더미변수 D5에 1의 값을 부여
. gen D5 = 0

. replace D5=1 if 구조 == "복도식"
(2,690 real changes made)

. 
. * 복합식일 경우 더미변수 D6에 1의 값을 부여
. gen D6 = 0

. replace D6=1 if 구조 == "복합식"
(268 real changes made)

. 
. * 연수를 조정해주기 
. gen age = 연수 - 6

. 
. * 통계량 확인하기
. global variable 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용면적 전용률 
> ///
> 방개수 화장실개수 층 D1 D2 D3 D4 D5 D6 

. 
. su $variable

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    거래금액 |      9,902    103578.5    56345.66      14900     540000
         age |      9,902     226.149    104.1706          2        587
      세대수 |      9,902    1127.261    1152.352         18       9510
주차대수_~대 |      9,902    1.140985    .4521128        .12       6.53
      용적률 |      9,902    282.7957     128.525         12       1249
-------------+---------------------------------------------------------
      건폐율 |      9,902     23.1531    9.776566          2         93
    전용면적 |      9,902    78.71598    27.62564       23.7     244.54
      전용률 |      9,902    76.48334    4.728811         55        100
      방개수 |      9,902    2.966269    .6487216          1          6
  화장실개수 |      9,902    1.647344    .4938287          1          4
-------------+---------------------------------------------------------
          층 |      9,902     9.80923    6.390964          1         66
          D1 |      9,902    .6384569    .4804717          0          1
          D2 |      9,902    .2904464    .4539913          0          1
          D3 |      9,902    .0708948    .2566619          0          1
          D4 |      9,902    .7012725    .4577232          0          1
-------------+---------------------------------------------------------
          D5 |      9,902    .2716623    .4448392          0          1
          D6 |      9,902    .0270652    .1622818          0          1

. 
. * 현재 사용가능한 모든 변수를 활용하여 회귀분석
. reg 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용면적 전용률 방개수 화장
> 실개수 층 D1 D2 D3 ///
> D4 D5 D6 
note: D5 omitted because of collinearity

      Source |       SS           df       MS      Number of obs   =     9,902
-------------+----------------------------------   F(15, 9886)     =    669.99
       Model |  1.5846e+13        15  1.0564e+12   Prob > F        =    0.0000
    Residual |  1.5588e+13     9,886  1.5768e+09   R-squared       =    0.5041
-------------+----------------------------------   Adj R-squared   =    0.5034
       Total |  3.1434e+13     9,901  3.1748e+09   Root MSE        =     39708

-------------------------------------------------------------------------------
     거래금액 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -67.16286   6.008844   -11.18   0.000    -78.94142    -55.3843
       세대수 |    3.39869   .3984384     8.53   0.000     2.617669     4.17971
주차대수_세대 |   27161.59   1291.415    21.03   0.000     24630.16    29693.03
       용적률 |   4.215148   4.906026     0.86   0.390    -5.401664    13.83196
       건폐율 |  -873.2433   62.52105   -13.97   0.000    -995.7973   -750.6893
     전용면적 |   869.0207   32.56165    26.69   0.000     805.1932    932.8482
       전용률 |  -14.71751   127.6095    -0.12   0.908    -264.8582    235.4232
       방개수 |   3334.818   1077.085     3.10   0.002     1223.512    5446.124
   화장실개수 |  -4426.359    1452.69    -3.05   0.002    -7273.927    -1578.79
           층 |   770.1384   68.33805    11.27   0.000     636.1819    904.0949
           D1 |   13782.93   28169.32     0.49   0.625    -41434.68    69000.53
           D2 |   45982.77   28183.65     1.63   0.103    -9262.931    101228.5
           D3 |    34341.9   28215.66     1.22   0.224    -20966.55    89650.35
           D4 |   5821.354   1414.417     4.12   0.000     3048.809    8593.899
           D5 |          0  (omitted)
           D6 |   -9617.32   2696.567    -3.57   0.000    -14903.14   -4331.499
        _cons |  -2875.528   29535.02    -0.10   0.922    -60770.19    55019.13
-------------------------------------------------------------------------------

. 
. * 전용면적 제외, 더미변수 D3와 D6 제외
. reg 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용률 방개수 화장실개수 층 
> D2 D3 ///
> D5 D6 

      Source |       SS           df       MS      Number of obs   =     9,902
-------------+----------------------------------   F(13, 9888)     =    669.91
       Model |  1.4720e+13        13  1.1323e+12   Prob > F        =    0.0000
    Residual |  1.6714e+13     9,888  1.6903e+09   R-squared       =    0.4683
-------------+----------------------------------   Adj R-squared   =    0.4676
       Total |  3.1434e+13     9,901  3.1748e+09   Root MSE        =     41113

-------------------------------------------------------------------------------
     거래금액 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -37.79913   6.107395    -6.19   0.000    -49.77087   -25.82739
       세대수 |    3.41733    .412531     8.28   0.000     2.608686    4.225975
주차대수_세대 |    40286.2   1235.187    32.62   0.000     37864.98    42707.42
       용적률 |    26.0009   5.007642     5.19   0.000      16.1849     35.8169
       건폐율 |  -917.9604   64.63964   -14.20   0.000    -1044.667   -791.2535
       전용률 |    1321.17    121.538    10.87   0.000     1082.931     1559.41
       방개수 |    21283.7   871.2112    24.43   0.000     19575.95    22991.45
   화장실개수 |   6975.232   1436.943     4.85   0.000      4158.53    9791.934
           층 |   810.1736   70.73864    11.45   0.000     671.5115    948.8358
           D2 |   35850.29   1025.392    34.96   0.000     33840.31    37860.27
           D3 |   23656.27   1735.395    13.63   0.000     20254.54    27057.99
           D5 |   -2569.04   1458.839    -1.76   0.078    -5428.661    290.5818
           D6 |  -15028.18    2632.35    -5.71   0.000    -20188.12   -9868.235
        _cons |  -118394.3   8386.661   -14.12   0.000    -134833.8   -101954.7
-------------------------------------------------------------------------------

. 
. * 종속변수에 log를 취하여 분석
. gen ln_price = ln(거래금액)

. 
. reg ln_price age 세대수 주차대수_세대 용적률 건폐율 전용률 방개수 화장실개수 층 
> D2 D3 ///
> D5 D6 

      Source |       SS           df       MS      Number of obs   =     9,902
-------------+----------------------------------   F(13, 9888)     =    821.00
       Model |  1226.33467        13   94.333436   Prob > F        =    0.0000
    Residual |  1136.14029     9,888  .114900919   R-squared       =    0.5191
-------------+----------------------------------   Adj R-squared   =    0.5185
       Total |  2362.47496     9,901  .238609732   Root MSE        =    .33897

-------------------------------------------------------------------------------
     ln_price |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -.0004649   .0000504    -9.23   0.000    -.0005636   -.0003662
       세대수 |   .0000331   3.40e-06     9.74   0.000     .0000265    .0000398
주차대수_세대 |   .3380025   .0101839    33.19   0.000       .31804     .357965
       용적률 |   .0001573   .0000413     3.81   0.000     .0000764    .0002382
       건폐율 |  -.0087479   .0005329   -16.41   0.000    -.0097926   -.0077032
       전용률 |    .008061   .0010021     8.04   0.000     .0060968    .0100253
       방개수 |    .199398    .007183    27.76   0.000     .1853179    .2134781
   화장실개수 |   .0890336   .0118473     7.52   0.000     .0658104    .1122567
           층 |   .0061706   .0005832    10.58   0.000     .0050274    .0073139
           D2 |   .2347374   .0084542    27.77   0.000     .2181655    .2513093
           D3 |   .2014895    .014308    14.08   0.000     .1734429    .2295361
           D5 |  -.0848809   .0120279    -7.06   0.000    -.1084579   -.0613038
           D6 |  -.1431785   .0217032    -6.60   0.000    -.1857213   -.1006357
        _cons |   9.794917   .0691465   141.65   0.000     9.659375    9.930458
-------------------------------------------------------------------------------

. 
. reg 거래금액 age 세대수 주차대수_세대 용적률 건폐율 전용률 방개수 화장실개수 층 
> D2 D3 ///
> D5 D6  ,r

Linear regression                               Number of obs     =      9,902
                                                F(13, 9888)       =     380.40
                                                Prob > F          =     0.0000
                                                R-squared         =     0.4683
                                                Root MSE          =      41113

-------------------------------------------------------------------------------
              |               Robust
     거래금액 |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
          age |  -37.79913   7.867141    -4.80   0.000    -53.22033   -22.37793
       세대수 |    3.41733   .4351359     7.85   0.000     2.564375    4.270286
주차대수_세대 |    40286.2   1674.678    24.06   0.000     37003.49    43568.91
       용적률 |    26.0009    4.84197     5.37   0.000     16.50965    35.49215
       건폐율 |  -917.9604   63.62098   -14.43   0.000     -1042.67   -793.2503
       전용률 |    1321.17   144.9002     9.12   0.000     1037.137    1605.204
       방개수 |    21283.7   1183.443    17.98   0.000     18963.91    23603.49
   화장실개수 |   6975.232   1489.455     4.68   0.000     4055.596    9894.869
           층 |   810.1736   80.79005    10.03   0.000     651.8086    968.5386
           D2 |   35850.29   1237.345    28.97   0.000     33424.84    38275.74
           D3 |   23656.27   1875.229    12.62   0.000     19980.44     27332.1
           D5 |   -2569.04   1386.904    -1.85   0.064    -5287.653    149.5743
           D6 |  -15028.18    1976.86    -7.60   0.000    -18903.23   -11153.13
        _cons |  -118394.3   10696.68   -11.07   0.000    -139361.9    -97426.6
-------------------------------------------------------------------------------

. 
. export excel using 2020_4Q_data.xlsx, replace
file 2020_4Q_data.xlsx saved

. 
. log close
      name:  <unnamed>
       log:  C:\Users\Kimyihwan\OneDrive - kaist.ac.kr\paper_prepare\seminar data\
> Regression_data.log
  log type:  text
 closed on:  28 Apr 2021, 22:53:18
----------------------------------------------------------------------------------
